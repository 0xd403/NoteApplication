<?xml version="1.0" encoding="utf-8" ?>
    
<!-- xmlns:m = assegno alla lettera m il namespace Test a cui posso accedere con m: -->
<!-- Con DataType specifico il tipo di dato da utilizzare nella pagina che devo specificare nel .cs con il BindingContext-->
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:m="clr-namespace:Test.ViewModels"
             xmlns:n="clr-namespace:Test.Models"
             xmlns:pages="clr-namespace:Test.Pages"
             x:Class="Test.MainPage"
             x:DataType="m:NotaViewModel">

    <Grid
        Margin="10" RowSpacing="10">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="55" />
        </Grid.RowDefinitions>

        <Label
            Grid.Row="0"
            Text="Notes"
            FontSize="50"
            FontFamily="CollegiateBlackFLF"
            TextColor="Red"
            HorizontalTextAlignment="Center"/>

        <CollectionView            
            Grid.Row="1"            
            x:Name="collectionView"
            ItemsSource="{Binding Notes}">
            
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="n:Note">
                    <Grid 
                        Margin="0,5,0,0"
                        ColumnSpacing="10"
                        ColumnDefinitions="*, Auto, Auto"
                        BackgroundColor="LightGoldenrodYellow">
                        <Label
                            Grid.Column="0"
                            Margin="10,0,0,0"
                            Text="{Binding Text}"
                            TextColor="Black"
                            HorizontalOptions="StartAndExpand" 
                            VerticalOptions="Center"/>
                        <ImageButton
                            Scale="0.4"
                            Grid.Column="1"
                            Margin="0,0,1,0"
                            Source="edit.svg"
                            Command="{Binding EditNoteCommand, Source={RelativeSource AncestorType={x:Type m:NotaViewModel}}}"
                            CommandParameter="{Binding .}"
                            HorizontalOptions="End"
                            VerticalOptions="Center"
                            SemanticProperties.Description="{Binding Id}"
                            SemanticProperties.Hint="{Binding Text}"/>
                        <ImageButton
                            Scale="0.8"
                            Grid.Column="2"
                            Margin="0,0,2,0"
                            Source="remove.svg"
                            Command="{Binding DeleteNoteCommand, Source={RelativeSource AncestorType={x:Type m:NotaViewModel}}}"
                            CommandParameter="{Binding Id}"
                            HorizontalOptions="End"
                            VerticalOptions="Center"
                            SemanticProperties.Description="{Binding Id}"/>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <ImageButton
            Grid.Row="0"
            Grid.RowSpan="99"
            Scale="0.85"
            Source="add.svg"
            HorizontalOptions="End"
            VerticalOptions="End"
            Clicked="Event_addNote">
        </ImageButton>

    </Grid>
</ContentPage>
